# クルシラ
特徴を選んでいただいて、好きな車を見つけていただけるアプリです。  
URL:https://car-recommended.ml

## はじめに
車の情報元である「カーセンサー Webサービス」がサービスを終了してしまうため、  
このアプリは12月16日でご利用ができなくなります。  
そのため時間が足りず、未実装機能があります。
動作説明の動画をYoutubeにアップしているので下記リンク先をご覧ください。  
Youtube:https://youtu.be/SahckyFFlu4

## 制作背景
近年の「若者の車離れ」という原因の一つに  
「一目惚れするような車に出会えていない」という問題があるからではないか、と考えたからです。  
車を調べるときは、メーカーや車種などをあらかじめ分かっていないと調べるのは困難です。  
そのため、車の「見た目・サイズ・国産もしくは外車・用途」といった点から車を探せるアプリを制作致しました。  

## 使用画面のイメージ
スマホサイズのみの対応となっております。  

<img width="1004" alt="スクリーンショット 2020-12-12 12 34 26" src="https://user-images.githubusercontent.com/71020018/101971670-86c81880-3c76-11eb-9195-77ee6480c7d5.png">


## 機能
### ユーザー登録関連
 ⚪︎ ログイン  
 ⚪︎ ログアウト  
 ⚪︎ 新規登録  
 ⚪︎ 登録人数を表示  
 
### 車の検索機能
それぞれの項目から1つ選択  
 ⚪︎ 車の見た目→「かわいい」「かっこいい」「シンプル」「おしゃれ」「レトロ」  
 ⚪︎ 車のサイズ→「ふつう」「すごくおおきい」「おおきい」「ちいさい」  
 ⚪︎ 車の製造国→「国産車」「外車」  
 ⚪︎ 車の用途　→「街乗り」「アウトドア」「スポーツ」  
 
### カーセンサーAPI連携
 ⚪︎ DBにある車情報と合致した車情報を取得  
 　　　→　検索のたびにAPIに接続するため表示が遅い  
 ⚪︎ 上記の問題のため、キャッシュファイルの生成  
 ⚪︎ cronでキャッシュファイル生成を自動化  

## AWS構成図


## 使用技術
### 使用言語
  ⚪︎ HTML  
  ⚪︎ CSS  
  ⚪︎ SCSS  
  ⚪︎ JavaScript  
  ⚪︎ jQuery  
  ⚪︎ PHP  
  ⚪︎ SQL  

### インフラ
  ⚪︎ Heroku (AWSに変更)  
  ⚪︎ AWS ( EC2, ALB, ACM, CloudFormation, Route53 )

### その他
  ⚪︎ Visual Studio Code  
  ⚪︎ シェルスクリプト (Heroku)  
  ⚪︎ cron  
  ⚪︎ draw.io  

## DB設計
### ユーザー管理テーブル
| id | name | email | password | created |
|:---:|:---:|:---:|:---:|:---:|
| 会員ID | ユーザーネーム | メールアドレス | パスワード | 登録日 |

### 車情報のテーブル
| id | name | maker | price | style | size | country | uses |
|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|
| ID | 車種名 | メーカー | 価格 | 見た目 | 大きさ | 国 | 用途 |

## 苦労した点
### 検索結果の表示を早くする
検索の度にAPIからデータを取得していたので、電波の悪い場所では結果の表示に1分以上かかっていました。  
必要なデータを毎日APIから自動で取得することで、ユーザーのストレスのない速度で結果を表示させることができました。

### 多次元配列からのデータ取得
車データの配列が深すぎて、表示させるのがすごく難しかった。

### SSL証明書発行後のエラー
証明書の発行はうまくいったがその後エラーで表示されず、  
2日間かけてEC2のロードバランサーやセキュリティグループの内容を色々試した結果、ようやくうまく表示されるようになった。

### 著作権について
今回カーセンサーAPIサービスが終了すると知りその提供元へ問い合わせ、  
完全に提供が終了してしまう及び24時間以上のキャッシュデータの保有も禁止、ということを告げられました。  
その後、他の車データAPIの提供元を調べましたが他にありませんでした。  
画像だけでもどうにかならないかと思い、ト◯タや◯産などの画像利用規約を確認しましたが、  
営利目的ではない&提供元のURLなどの情報を記載する  
としても、利用は禁止でした。  
いろんな方に利用していただきたいと思い、今後Laravelを用い、下記の未実装機能も実装しようと考えていたため、  
このような結末となり非常に残念な思いです。


## 未実装機能
  ⚪︎ Laravelによる実装  
  ⚪︎ PCやタブレットへのレスポンシブ対応  
  ⚪︎ ページネーション  
  ⚪︎ ソーシャルログイン  
  ⚪︎ 履歴表示  
  ⚪︎ 結果のシェア  
  ⚪︎ S3を使用して画像を保存

## 注意
  ⚪︎ 登録してある車は、351台です。  
  ⚪︎ このサイトで選択するスタイルや大きさには個人差がありますので、ご了承ください。  
  ⚪︎ 会員登録していただく意味は特にありませんが、ご利用していただいた人数をメニューに出力し、  
     ユーザーからも把握できるため、登録していただけると嬉しいです。  
  ⚪︎ スマホサイズのみの対応となっていますので、PCやタブレットではうまく表示されません。  
  ⚪︎ 「結果」に表示される車のほとんどは現行車(現在も新車で買うことができる車)です。中古車も数台表示するようにしています。  
